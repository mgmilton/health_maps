<% @location.write_neighborhood_health_data %>


<div class='neighborhood_data'>
  <h1> Neighborhood Health information for <%= @location.name %> </h1>
</div>

<<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawChart);


      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Neighborhood', 'Access to HealthCare', 'Arthritis Prevalence', 'Binge Drinking Prevalance', 'High Blood Pressure Prevalence', 'Cancer Prevalence', 'Asthma Prevalence', 'Current Smoking Prevalance', 'Dental Visit Prevalence', 'Diabetes Prevalence', 'High Cholesterol Prevalence', 'Kidney Disease Prevalence', 'Lack of Physical Activity Prevalence', 'Mammogrpahy Prevalence', 'Bad Mental Health Prevalence', 'Obesity Prevalence', 'Pap Smear Prevalence', 'Lack of Sleep Prevalence', 'Stroke Prevalence', 'Teeth Loss Prevalence', 'Heart Disease Prevalence', 'Routine Checkup Prevalence'],
          ['1', 10, 40, 20, 50, 60, 70, 80, 90, 10, 22, 33, 44, 55, 66 , 44, 43, 22, 33, 20, 21, 22],
        ]);

        var options = {
          chart: {
            title: ' <%= raw @location.name %>',
            subtitle: 'CDC data for key health measures',
          },
          bars: 'vertical' // Required for Material Bar Charts.
        };

        var chart = new google.charts.Bar(document.getElementById('barchart_material'));

        chart.draw(data, google.charts.Bar.convertOptions(options));
      }
    </script>
  </head>
  <body>
    <div id="barchart_material" style="width: 1200px; height: 1200px;"></div>
  </body>
</html>
