<% @location.write_neighborhood_health_data %>


<div class='neighborhood_data'>
  <h1> Health Information for A Random Neighborhood <%= @location.name_with_state %> </h1>
</div>

<div id="barchart_material" style="width: 1200px; height: 1200px;">
</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load('current', {'packages':['bar']});
  google.charts.setOnLoadCallback(drawChart);


  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Random Neighborhood', 'Lack of Access to Health Care', 'Arthritis Prevalence', 'Binge Drinking Prevalance', 'High Blood Pressure Prevalence', 'Cancer Prevalence', 'Asthma Prevalence', 'Current Smoking Prevalance', 'Dental Visit Prevalence', 'Diabetes Prevalence', 'High Cholesterol Prevalence', 'Kidney Disease Prevalence', 'Lack of Physical Activity Prevalence', 'Bad Mental Health Prevalence', 'Obesity Prevalence', 'Pap Smear Prevalence', 'Lack of Sleep Prevalence', 'Stroke Prevalence', 'Teeth Loss Prevalence', 'Heart Disease Prevalence', 'Routine Checkup Prevalence'],
      ['Census Code: <%=@location.neighborhoods.first.tractfips%>',
      <%=@location.random_neighborhood.access_to_healthcare %>,
      <%=@location.random_neighborhood.arthritis_prevalence%>, <%=@location.random_neighborhood.binge_drinking_prevalence%>,
      <%=@location.random_neighborhood.high_blood_pressure_prevalence%>,
      <%=@location.random_neighborhood.cancer_prevalence%>,
      <%=@location.random_neighborhood.asthma_prevalence%>,
      <%=@location.random_neighborhood.current_smoking_prevalence%>,
      <%=@location.random_neighborhood.dental_visit_prevalence%>,
      <%=@location.random_neighborhood.diabetes_prevalence%>,
      <%=@location.random_neighborhood.high_cholesterol_prevalence%>,
      <%=@location.random_neighborhood.kidney_disease_prevalence%>,
      <%=@location.random_neighborhood.lack_of_physical_activity_prevalence%>,
      <%=@location.random_neighborhood.bad_mental_health_prevalence%>,
      <%=@location.random_neighborhood.obesity_prevalence%>,
      <%=@location.random_neighborhood.pap_smear_prevalence%>,
      <%=@location.random_neighborhood.lack_of_sleep_prevalence%>,
      <%=@location.random_neighborhood.stroke_prevalence%>,
      <%=@location.random_neighborhood.teeth_loss_prevalence%>,
      <%=@location.random_neighborhood.heart_disease_prevalence%>,
      <%=@location.random_neighborhood.routine_checkup_prevalence%>],
    ]);

    var options = {
      chart: {
        title: 'CDC Population Data for Health Measurements',
        subtitle: 'All Metrics as Percentage of Population',
      },
      bars: 'vertical',
      vAxis: {
        title: 'Population (percentage)',
        minValue: 0,
        maxValue: 100
      }
    };

    var chart = new google.charts.Bar(document.getElementById('barchart_material'));

    chart.draw(data, google.charts.Bar.convertOptions(options));
  }
</script>
